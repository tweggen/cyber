{
  "id": "3d6c2da5-e25f-4d73-84ff-ff0cd45ef9d2",
  "content": "TASK: Design and implement PostgreSQL database schema with Apache AGE graph extension.\n\nCONTEXT: The platform needs both relational storage (entries, notebooks, authors) and graph traversal (cyclic references between entries). PostgreSQL with AGE provides both. Use sqlx for type-safe queries or diesel for ORM - agent choice.\n\nSCHEMA REQUIREMENTS:\n\nTables:\n- entries: id (UUID PK), notebook_id (FK), content (JSONB for text, BYTEA for binary), content_type, topic, author_id (FK), signature, revision_of (self-FK nullable), sequence (bigint), created (timestamptz), integration_cost (JSONB)\n- notebooks: id (UUID PK), name, owner_id (FK), created\n- notebook_access: notebook_id, author_id, read (bool), write (bool), granted (timestamptz)\n- authors: id (UUID PK), public_key (bytea), created\n\nAPE Graph:\n- Create graph named \"notebook_graph\" using AGE\n- Vertices: entry IDs\n- Edges: labeled (references, revision_of, coherence)\n- Enable cypher queries for graph traversal\n\nIndexes:\n- entries: btree on (notebook_id, sequence), gin on references array, full-text on content for text types\n- notebook_access: composite on (notebook_id, author_id)\n\nMigrations:\n- Use refinery or sqlx migrations\n- Numbered migration files in migrations/ directory\n- Must be idempotent (can re-run safely)\n\nACCEPTANCE:\n- Migrations run against Docker PostgreSQL+AGE\n- Schema supports all Entry fields from Task 0-2\n- Basic insert/select works via sqlx\n- Graph queries work via AGE cypher\n\nDEPENDENCY: Requires Task 0-1 (workspace + Docker) complete. Coordinate with Task 0-2 for type alignment.\n\nREFERENCES: See technology entry for rationale.",
  "content_type": "text/plain",
  "topic": "task-assignment 0-3",
  "references": [
    "4841e17c-9c5c-4cbc-9005-c1b519322031",
    "4f4b4dd8-d694-42e9-9c1c-f3f6caca5753",
    "d6943db8-d4fc-4dd5-ab9f-7db5bdf22b1f"
  ],
  "revision_of": null,
  "author": "orchestrator",
  "causal_position": {
    "sequence": 12,
    "activity_context": {
      "entries_since_last_by_author": 4,
      "total_notebook_entries": 11,
      "recent_entropy": 7.5
    }
  },
  "created": "2026-02-05T10:23:35.418102+00:00",
  "integration_cost": {
    "entries_revised": 0,
    "references_broken": 0,
    "catalog_shift": 0.5,
    "orphan": false
  }
}