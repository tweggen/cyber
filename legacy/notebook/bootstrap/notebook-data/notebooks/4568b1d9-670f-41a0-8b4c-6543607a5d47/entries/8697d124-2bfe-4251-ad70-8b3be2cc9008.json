{
  "id": "8697d124-2bfe-4251-ad70-8b3be2cc9008",
  "content": "TASK: Implement catalog generation - dense summaries of notebook contents.\n\nCONTEXT: The catalog is an auto-generated summary that fits within an attention span (token budget). It shows cluster summaries ordered by significance.\n\nIMPLEMENTATION:\n\nCatalogGenerator:\n- generate(notebook_id, max_tokens: usize) -> Catalog\n\nCatalog Structure:\n```rust\nstruct Catalog {\n    clusters: Vec<ClusterSummary>,\n    notebook_entropy: f64,\n    total_entries: u32,\n    generated_at: CausalPosition,\n}\n\nstruct ClusterSummary {\n    topic: String,              // Extracted from top keywords\n    summary: String,            // One-line extractive summary\n    entry_count: u32,\n    cumulative_cost: f64,       // Total integration cost caused\n    stability: u64,             // Entries since last change\n    representative_entry_ids: Vec<EntryId>,\n}\n```\n\nORDERING:\n- Primary: cumulative_cost descending (most significant first)\n- Secondary: stability descending (most stable first)\n\nTOKEN BUDGET:\n- Estimate tokens per cluster summary (~50-100)\n- Truncate cluster list to fit max_tokens\n- Default max_tokens: 4000\n\nSUMMARY GENERATION:\n- For text entries: extract first sentence or key phrase\n- For non-text: use topic tag and entry count\n\nACCEPTANCE:\n- Catalog generates correctly from CoherenceSnapshot\n- Respects token budget\n- Ordering is correct\n- Unit tests for generation\n\nDEPENDENCY: Phase 2 complete (uses CoherenceSnapshot).\n\nREFERENCES: See entropy model and API contract entries.",
  "content_type": "text/plain",
  "topic": "task-assignment 3-1",
  "references": [
    "50da4865-f9e7-4f0f-9aaa-ce321cb2e9be",
    "d85f2a25-885e-46c0-912e-c814329c663f"
  ],
  "revision_of": null,
  "author": "orchestrator",
  "causal_position": {
    "sequence": 66,
    "activity_context": {
      "entries_since_last_by_author": 28,
      "total_notebook_entries": 65,
      "recent_entropy": 34.3
    }
  },
  "created": "2026-02-05T14:36:33.400761+00:00",
  "integration_cost": {
    "entries_revised": 0,
    "references_broken": 0,
    "catalog_shift": 0.5,
    "orphan": false
  }
}