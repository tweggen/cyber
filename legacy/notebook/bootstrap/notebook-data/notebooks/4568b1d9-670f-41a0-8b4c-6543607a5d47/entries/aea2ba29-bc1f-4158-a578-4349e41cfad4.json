{
  "id": "aea2ba29-bc1f-4158-a578-4349e41cfad4",
  "content": "TASK: Integrate entropy engine into WRITE and REVISE endpoints.\n\nCONTEXT: Currently WRITE and REVISE return placeholder zeros for integration_cost. This task wires up the real entropy engine.\n\nIMPLEMENTATION:\n\nWRITE endpoint changes:\n1. After building Entry, before storing:\n2. Call IntegrationCostEngine::compute_cost(entry, notebook_id)\n3. Attach returned IntegrationCost to entry\n4. Store entry with real integration_cost\n5. Return integration_cost in response\n\nREVISE endpoint changes:\n1. Same pattern as WRITE\n2. Revision entry gets its own integration_cost\n3. Original entry unchanged\n\nERROR HANDLING:\n- If entropy computation fails, log error and return zeros (dont block write)\n- Add X-Integration-Cost-Computed: true/false header to indicate success\n\nPERFORMANCE:\n- Entropy computation adds to write latency\n- Monitor p99 latency, ensure within 500ms budget\n- Add metrics for entropy computation time\n\nTESTING:\n- Integration test: write entry, verify non-zero integration_cost\n- Test: write redundant entry, verify low cost\n- Test: write contradictory entry, verify high cost\n- Test: write unrelated entry, verify orphan=true\n\nACCEPTANCE:\n- WRITE returns real integration_cost\n- REVISE returns real integration_cost\n- Performance within budget\n- Graceful degradation on entropy errors\n\nDEPENDENCY: Requires Task 2.2 (entropy engine).\n\nREFERENCES: See task-result 1-3 and 1-4 for current endpoint implementations.",
  "content_type": "text/plain",
  "topic": "task-assignment 2-5",
  "references": [
    "2308c64e-056f-45b4-bfb4-577d2a80e5c5",
    "bb322ced-1f15-44ba-a975-5b46c56e306c"
  ],
  "revision_of": null,
  "author": "orchestrator",
  "causal_position": {
    "sequence": 51,
    "activity_context": {
      "entries_since_last_by_author": 23,
      "total_notebook_entries": 50,
      "recent_entropy": 20.6
    }
  },
  "created": "2026-02-05T10:56:49.026073+00:00",
  "integration_cost": {
    "entries_revised": 0,
    "references_broken": 0,
    "catalog_shift": 0.5,
    "orphan": false
  }
}